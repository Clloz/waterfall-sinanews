# waterfall-sinanews

### 预览地址
[预览地址](https://www.clloz.com/study/sinanews/waterfall-sinanews.html "预览地址")

### 懒加载原理
将页面上的图片都指向同一张小图片或者空src，将正确的src保存在 data-src 属性中。写一个方法用来将图片的src换成正确的src，当页面加载的时候先将视窗内的图片调用方法来显示，然后监听滚动事件，当对应的图片出现在视窗中的时候，调用方法把图片的src替换成正确的src来请求图片。

### 瀑布流原理
使用绝对定位来布局，用js来计算每个元素的位置，步骤如下：
1. 通过图片盒子的宽度和页面的宽度计算出列数
2. 用一个数组记录当前各列的高度，并用一个变量标记当前高度最小的列的index
3. 监听图片的onload事件，图片加载完成的时候计算图片的高度，将图片放到当前高度最小的列，并更新列的高度

### 实现原理
请求定量新闻数据，用瀑布流对新闻元素进行布局。触发滚动到底部的事件再次请求数据，进行布局（用函数防抖来处理滚动到底部）[
